# Отчёт по лабораторной работе по DevOps №2⭐
## Содержание:
- ["Bad" Docker-compose](#bad-docker-compose)
- ["Good" Docker-compose](#good-docker-compose)
- [Изоляция контейнеров](#изоляция-контейнеров)

## "Bad" Docker-compose

`nano docker-compose.yml` - создаем файл Docker-compose

![IMG_9573](https://github.com/user-attachments/assets/380e1b9d-ab0d-4275-8102-d82e04ddf260)

Что же такого **"bad"** в этом файле?

1. Стандартный порт
```
ports:
  - "80:80"
```
Не стоит использовать явный порт для http, так как это может привести к конфликтам с другими серверами на том же порту.

2.
```
volumes:
  - ./app:/usr/scr/app
```
ffff

3. Отсутствие networks

нструкция WORKDIR устанавливает рабочий каталог контейнера, а последующие команды наследуют привязку WORKDIR. Лучше сохранять все исходные файлы в отдельной папке в корневом каталоге, чем размещать их там же, где находятся системные файлы. Это снижает риск случайного повреждения образа при удалении.

## "Good" Docker-compose
![IMG_9574](https://github.com/user-attachments/assets/a90cda72-8eae-47b6-8671-95c5d251a9d2)

Что стало **"good"**?

1. Нестандартный порт
```
ports:
  - "8080:80"
```
Теперь мы можем не бояться конфликтов с другими серверами на хосте, так как теперь наш порт нестандартный.

2.
```
volumes:
  - app-data:/usr/scr/app
```
```
volumes:
  app-data:
```
ffff

3. тсутствие WORKDIR
```
networks:
  - app_network
```
```
networks:
  - db_network
```
```
networks:
  app_network:
    driver: bridge
  db_network:
    driver: bridge
```
пупупу

## Изоляция контейнеров

1.  Добился изоляции контейнеров, поместив их в разные сети с помощью networks в docker-compose. Теперь контейнеры находятся не в общей сети, а каждый в своей, поэтому они не могут друг друга «видеть»

2. Создал две разные сети: db_network и api_network, и указал для каждого контейнера соответствующую сеть. Так как контейнеры находятся в разных сетях, они не смогут друг друга увидеть и соответственно общаться. Если надо, чтобы они общались, то просто можно закомментировать создание и указание сетей.

3. Не указана сеть. В good_docker-compose мы добавили web_network и app_network, то есть создаем две отдельные сети, чтобы контейнеры не могли видеть друг друга. Контейнер web подключен к web_network, а контейнер app к app_network. Это значит, что оба контейнера могут работать одновременно, но они изолированы друг от друга.

4. Созданы две отдельные сети: node-network для веб-сервиса и db-network для базы данных. Сервисы размещены в разных сетях что позволяет поднять контейнеры вместе, но исключить доступ по сети.
Контейнеры, находящиеся в разных сетях, не могут взаимодействовать друг с другом напрямую по сети. Это повышает безопасность и позволяет гибко управлять доступом между сервисами. В Docker Compose можно явно указать, к каким сетям подключать каждый контейнер, что исключает лишние связи. Этот подход помогает обеспечить как безопасность, так и более гибкую настройку сервисов.

5. Для изоляции сервисов друг от друга можно воспользоваться различными сетями. Это позволит контейнерам быть частью одной сборки, но они не будут иметь возможность взаимодействовать напрямую через сеть, если находятся в разных сетях.

6. Введена внутренняя сеть, контейнеры не открыты напрямую для внешнего доступа. Итак, в конечном счете мы создали внутреннюю сеть Docker для связи между сервисами и изолировали контейнеры.
Для того чтобы контейнеры не "видели" друг друга по сети, была настроена внутренняя сеть internal, и контейнеры связываются только через неё. Это ограничивает доступ к контейнерам извне и между ними, улучшая безопасность и контроль сети
